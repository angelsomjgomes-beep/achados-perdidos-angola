<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Achados & Perdidos Angola</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    body { font-family: 'Inter', sans-serif; overflow-x: hidden; }
    .navy { background-color: #0a192f; }
    .navy-btn { background-color: #0a192f; }
    .navy-btn:hover { background-color: #112240; transform: scale(1.05); transition: 0.2s; }
    .fade { opacity: 0; transform: translateY(10px); transition: opacity 0.8s ease, transform 0.6s ease; }
    .fade.show { opacity: 1; transform: translateY(0); }
    .bg-animado {
      background: radial-gradient(circle at top left, #0a192f, #112240, #0a192f);
      background-size: 200% 200%;
      animation: movimento 10s ease infinite;
    }
    @keyframes movimento {
      0% { background-position: 0% 0%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 0%; }
    }
  </style>
</head>
<body class="bg-animado text-gray-100 flex flex-col min-h-screen">

  <!-- Tela de Boas-vindas -->
  <div id="boas-vindas" class="fixed inset-0 bg-[#0a192f] flex flex-col items-center justify-center text-center text-white z-50 opacity-0 transition-opacity duration-700">
    <h1 class="text-4xl font-bold mb-4">👋 Bem-vindo(a) ao</h1>
    <h2 class="text-3xl font-extrabold text-blue-300 mb-6">Achados & Perdidos Angola</h2>
    <p class="max-w-md text-gray-300 mb-8">Ajudamos a reconectar pessoas aos seus pertences. Aqui, quem encontra ajuda quem perdeu.</p>
    <button id="entrar-site" class="px-8 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 font-semibold shadow-lg">Entrar</button>
  </div>

  <!-- Header -->
  <header class="navy text-white p-4 shadow-lg">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-2 font-bold text-xl hover:scale-105 transition">
        <i data-lucide="search" class="w-6 h-6"></i> Achados & Perdidos
      </a>
      <nav class="flex items-center gap-6 text-sm font-medium">
        <a href="index.html" class="underline font-semibold">🏠 Início</a>
        <a href="feed.html" class="hover:underline">📰 Feed</a>
        <a href="publicar.html" class="hover:underline">➕ Publicar</a>
        <a href="sobre.html" class="hover:underline">ℹ️ Sobre</a>
      </nav>
    </div>
  </header>

  <!-- Conteúdo Principal -->
  <main id="conteudo" class="flex-1 flex flex-col items-center justify-center text-center px-6 opacity-0 transition-opacity duration-700">
    <h1 id="titulo" class="text-5xl font-bold mb-6 text-blue-100">Encontra. Ajuda. Reconecta.</h1>
    <p class="max-w-2xl text-gray-300 mb-10 text-lg">
      Achados & Perdidos Angola é uma plataforma gratuita que conecta quem perdeu e quem encontrou objetos pessoais em todo o país.
    </p>

    <div class="flex flex-wrap gap-4 justify-center">
      <a href="feed.html" class="navy-btn text-white px-8 py-3 rounded-lg font-semibold shadow-lg hover:shadow-2xl transition">📰 Ver Feed</a>
      <a href="publicar.html" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold shadow-lg hover:shadow-2xl transition">➕ Publicar Item</a>
    </div>

    <div id="user-area" class="hidden mt-10 fade">
      <p class="text-lg mb-2">👋 Olá, <span id="user-name" class="font-semibold text-blue-300"></span>!</p>
      <a href="feed.html" class="navy-btn px-6 py-2 rounded-lg text-white font-medium shadow">Ir para o Feed</a>
    </div>
  </main>

  <footer class="navy text-white p-6 text-center mt-auto">
    © <span id="ano"></span> Achados & Perdidos Angola
  </footer>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";
    import { firebaseConfig } from "./firebase-config.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const boasVindas = document.getElementById("boas-vindas");
    const entrarSite = document.getElementById("entrar-site");
    const conteudo = document.getElementById("conteudo");
    const userArea = document.getElementById("user-area");
    const userName = document.getElementById("user-name");

    // 1️⃣ Tela de boas-vindas (somente primeira visita)
    if (!localStorage.getItem("visitou_site")) {
      boasVindas.style.opacity = "1";
    } else {
      conteudo.style.opacity = "1";
    }

    entrarSite.addEventListener("click", () => {
      boasVindas.style.opacity = "0";
      setTimeout(() => {
        boasVindas.classList.add("hidden");
        conteudo.style.opacity = "1";
        localStorage.setItem("visitou_site", "true");
      }, 700);
    });

    // 2️⃣ Mostrar nome do utilizador se estiver logado
    onAuthStateChanged(auth, (user) => {
      if (user) {
        userName.textContent = user.displayName || user.phoneNumber || "Utilizador";
        userArea.classList.remove("hidden");
        setTimeout(() => userArea.classList.add("show"), 300);
      }
    });

    document.getElementById("ano").textContent = new Date().getFullYear();
    lucide.createIcons();
  </script>
</body>
</html>
